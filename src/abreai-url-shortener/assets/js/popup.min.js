async function shortenUrl(e){if(!/^https?:\/\//.test(e))throw new Error("Invalid input URL");const t=await fetch(`https://abre.ai/generate.txt?url=${e}`);return t.text()}function showResult(e){const t=document.getElementById("qr"),n=document.getElementById("url"),o=document.getElementById("copied");n.value=e,new QRCode(t,{text:e,width:270,height:270}),t.className="done",n.parentElement.onclick=function(){n.select(),document.execCommand("copy")&&(o.className="visible",setTimeout(()=>{o.className=""},2e3))}}function showError(){const e=document.getElementById("qr");e.className="error"}chrome.tabs.query({currentWindow:!0,active:!0},function(e){const t=e[0].url;shortenUrl(t).then(showResult).catch(showError)}),document.getElementById("copied").textContent=chrome.i18n.getMessage("copied");